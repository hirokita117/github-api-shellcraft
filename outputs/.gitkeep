File generation takes place here.
